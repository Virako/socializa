<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="i18n.html">

<link rel="stylesheet" href="../bower_components/font-awesome/css/font-awesome.min.css">

<dom-module id="socializa-login">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        text-align: center;
        padding-left: 10px;
        padding-right: 10px;
        padding-top: 20px;
      }

      .social-btn {
        cursor: pointer;
        font-size: large;
        border-radius: 50px;
        background-color: #888;
        color: white;
        margin-right: 20px;
        float: left;
        width: 50px;
        height: 50px;
        line-height: 50px;
      }

      .social {
        width: 190px;
        margin: 20px auto;
      }

      .last {
        margin-right: 0px;
      }
    </style>

    <div class="header">
        <img src="../images/icon.png" class="logo" alt="logo"/><br/>
        <h1>Socializa</h1>
    </div>

    <div class="form">
        <form>
            <paper-input type="email" id="email" label="{{ emailLabel }}" value="{{ email::input }}"></paper-input>
            <paper-input type="password" id="password" label="{{ passwordLabel }}" value="{{ password::input }}"></paper-input>
        </form>
        <a href="#">{{ _("new account") }}</a>
    </div>

    <div class="social">
        <div class="social-btn">
            <i class="fa fa-facebook" aria-hidden="true"></i>
        </div>
        <div class="social-btn">
            <i class="fa fa-twitter" aria-hidden="true"></i>
        </div>
        <div class="social-btn last">
            <i class="fa fa-google-plus" aria-hidden="true"></i>
        </div>
    </div>

    <paper-button on-tap="login" class="fixed-btn success">{{ _("Login") }}</paper-button>

  </template>

  <script>
    Polymer({
      is: 'socializa-login',
      _: i18n._,

      properties: {
        user: { notify: true },
        email: { notify: true },
        emailLabel: { value: function () { return i18n._("email") } },
        password: { notify: true },
        passwordLabel: { value: function() { return i18n._("password") } },
      },

      login: function(e) {
        // TODO: make the real login
        console.log("auth: " + this.email + ', ' + this.password);
        this.set('user.isAuthenticated', true);
        this.set('user.username', this.email);
        this.set('user.apikey', 'APIKEY');

        $.cookie('socializa-user', JSON.stringify(this.user));
        route = document.querySelectorAll("socializa-app /deep/ route-app")[0];
        route.set('route.path', '/index');
        // Fix to refresh header layout styles
        document.querySelector("app-header-layout").notifyResize();
      }

    });
  </script>
</dom-module>
